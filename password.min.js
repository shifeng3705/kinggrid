!function(e){"function"!=typeof define||!define.amd||"undefined"!=typeof nonUseAmd&&nonUseAmd?e():"undefined"!=typeof HTMLDev&&HTMLDev?define(["./signature"],e):define(["./signature.min"],e)}((window,function(e){function c(e,n,o,t){null==t&&(t=!1);var i,s=escape(n);t?r.test(s)&&(document.cookie=e+"="+n+";expires="+o):(t=d(o),(i=new Date).setTime(i.getTime()+ +t),r.test(s)&&(document.cookie=e+"="+s+";expires="+i.toGMTString())),"pwd"===e&&(a.CookiePWD=i.toGMTString())}function p(e){var e=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(e=document.cookie.match(e))?unescape(e[2]):null}function u(e){var n=new Date,o=(n.setTime(n.getTime()-1),p(e));null!=o&&(document.cookie=e+"="+o+";expires="+n.toGMTString())}var n=window.kinggrid,a=(window.kingPlus,window.Signature),w=n.Utils,d=(window.jQuery,function(e){var n=+e.substring(1,e.length),e=e.substring(0,1);return"s"==e?1e3*n:"h"==e?60*n*60*1e3:"d"==e?24*n*60*60*1e3:void 0}),r=new RegExp(/[0-9A-Za-z]/);return a.prototype.onshowSealsDialog_PW=function(o){var t,i=this;i.sealService.getKeysn({},function(e){var n;i.keysn=t=e,"true"==p("ck")&&o.find("#kg-remenberPwd").attr("checked","checked"),o.find("#kg-remenberPwd").is(":checked")&&(e=p("ksn"),t==e&&(e=o.find("#kg-password"),n=p("pwd"),null!=(n=a.options.pw_enc_save?w.Base64.of().decode(n):n)?e.val(n):e.val("123")))})},a.prototype.onexecSuccess=function(e,t,i,s){var d,r=this;s=s||a.options.rememberPwdAndNotShowSealTpl,r.sealService.getKeysn({},function(e){var n,o;r.keysn=d=e,i?(n=p("ksn"),e=a.options.pw_timeout,o=function(e){d!=n?((void 0===e||e.indexOf("s")<0&&e.indexOf("h")<0&&e.indexOf("d")<0)&&(e="s1800"),a.options.pw_enc_save&&(t=w.Base64.of().encode(t)),c("ksn",d,e),c("pwd",t,e),c("ck","true",e),s&&c("SST","true",e)):s&&c("SST","true",a.CookiePWD,!0)},a.options.pw_server_timeout?r.sealService.getPwdSaveTime(o,e):o(e)):a.options.pwd_clear_flag||a.options.remberPwdAndShowSealsDlg&&(u("ksn"),u("pwd"),u("ck"),u("SST"),a.options.rememberPwdAndNotShowSealTpl=!1,a.options.password=null)})},a.prototype.ongetRPW=function(e){if(p("ksn")==e)return e=p("pwd"),a.options.pw_enc_save?w.Base64.of().decode(e):e},a.prototype.ondeletePWD=function(){u("ksn"),u("pwd"),u("ck")},a.prototype.onDeleteRPW=function(){u("ksn"),u("pwd"),u("ck"),u("SST")},a}));
//V3.0.0.572