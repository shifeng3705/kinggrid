!function(e){"function"!=typeof define||!define.amd||"undefined"!=typeof nonUseAmd&&nonUseAmd?e():"undefined"!=typeof HTMLDev&&HTMLDev?define(["./signature"],e):define(["./signature.min"],e)}((window,function(e){function a(e,n,o,t){null==t&&(t=!1);var i=e+"_expires",s=window.localStorage;t?(s.setItem(e,n),s.setItem(i,o)):(t=r(o),o=new Date,s.setItem(e,n),s.setItem(i,o.getTime()+t))}function w(e){var n=window.localStorage;return n.getItem(e+"_expires")<=new Date?(p(e),null):n.getItem(e)}function p(e){var n=window.localStorage,o=e+"_expires";n.removeItem(e),n.removeItem(o)}var n=window.kinggrid,c=(window.kingPlus,window.Signature),u=n.Utils,r=(window.jQuery,function(e){var n=+e.substring(1,e.length),e=e.substring(0,1);return"s"==e?1e3*n:"h"==e?60*n*60*1e3:"d"==e?24*n*60*60*1e3:void 0});return c.prototype.onshowSealsDialog_PW=function(o){var t,i=this;i.sealService.getKeysn({},function(e){var n;i.keysn=t=e,"true"==w("ck")&&o.find("#kg-remenberPwd").attr("checked","checked"),o.find("#kg-remenberPwd").is(":checked")&&(e=w("ksn"),t==e&&(e=o.find("#kg-password"),n=w("pwd"),null!=(n=c.options.pw_enc_save?u.Base64.of().decode(n):n)?e.val(n):e.val("123")))})},c.prototype.onexecSuccess=function(e,t,i,s){var r,d=this;s=s||c.options.rememberPwdAndNotShowSealTpl,d.sealService.getKeysn({},function(e){var n,o;d.keysn=r=e,i?(n=w("ksn"),e=c.options.pw_timeout,o=function(e){r!=n?((void 0===e||e.indexOf("s")<0&&e.indexOf("h")<0&&e.indexOf("d")<0)&&(e="s1800"),c.options.pw_enc_save&&(t=u.Base64.of().encode(t)),a("ksn",r,e),a("pwd",t,e),a("ck","true",e),s&&a("SST","true",e)):s&&a("SST","true",window.localStorage.getItem("pwd_expires"),!0)},c.options.pw_server_timeout?d.sealService.getPwdSaveTime(o,e):o(e)):c.options.pwd_clear_flag||c.options.remberPwdAndShowSealsDlg&&(p("ksn"),p("pwd"),p("ck"),p("SST"),c.options.rememberPwdAndNotShowSealTpl=!1,c.options.password=null)})},c.prototype.ongetRPW=function(e){if(w("ksn")==e)return e=w("pwd"),c.options.pw_enc_save?u.Base64.of().decode(e):e},c.prototype.ondeletePWD=function(){p("ksn"),p("pwd"),p("ck")},c.prototype.onDeleteRPW=function(){p("ksn"),p("pwd"),p("ck"),p("SST")},c}));
//V3.0.0.572